{
  "CustomToolSpec": {
    "Id": "Automation.Tmpl.Storage.BoostEmptying80",
    "GroupId": "AutomationStorageToolGroupId",
    "Type": "IgorZ.Automation.TemplateTools.ApplyTemplateTool",
    "Order": 13,
    "Icon": "Sprites/IgorZ/tool-empty-80pct",
    "DisplayNameLocKey": "IgorZ.Automation.Tool.tmpl.EmptyAt80pct.DisplayName",
    "DescriptionLocKey": "IgorZ.Automation.Tool.tmpl.EmptyAtXpct.Description",
  },
  "AutomationTemplateSpec": {
    "TemplateFamilyName": "Storage.BoostEmptying",
    "Rules": [
      {
        "Condition": {
          "TypeId": "IgorZ.Automation.Conditions.ScriptedCondition",
          "Parameters": [
            { "Name": "Precondition", "StrValue": "(and (?act Inventory.StartEmptying) (eq (getlen Inventory.InputGoods) 0) (gt (getlen Inventory.OutputGoods) 0))" },
            { "Name": "Expression", "StrValue": "(gt (sig Inventory.OutputGood.{% (getelement Inventory.OutputGoods 0) %}) {% (round (div (mul (getvalue Inventory.Capacity) 80) (getlen Inventory.OutputGoods))) %})" }
          ]
        },
        "Action": {
          "TypeId": "IgorZ.Automation.Actions.ScriptedAction",
          "Parameters": [
            { "Name": "Expression", "StrValue": "(act Inventory.StartEmptying)" }
          ]
        }
      },
      {
        "Condition": {
          "TypeId": "IgorZ.Automation.Conditions.ScriptedCondition",
          "Parameters": [
            { "Name": "Precondition", "StrValue": "(and (?act Inventory.StopEmptying) (eq (getlen Inventory.InputGoods) 0) (gt (getlen Inventory.OutputGoods) 0))" },
            { "Name": "Expression", "StrValue": "(le (sig Inventory.OutputGood.{% (getelement Inventory.OutputGoods 0) %}) {% (round (div (mul (getvalue Inventory.Capacity) 40) (getlen Inventory.OutputGoods))) %})" }
          ]
        },
        "Action": {
          "TypeId": "IgorZ.Automation.Actions.ScriptedAction",
          "Parameters": [
            { "Name": "Expression", "StrValue": "(act Inventory.StopEmptying)" }
          ]
        }
      }
    ]
  }
}
